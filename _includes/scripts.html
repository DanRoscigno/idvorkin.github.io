<script src="https://code.jquery.com/jquery-3.4.1.min.js"></script>
<script src="{{ site.url }}/assets/js/vendor/md-toc.js"></script>
<script src="{{ site.url }}/assets/js/vendor/copied_from_hackmd_extras.js"></script>
<script src="//s3.amazonaws.com/idvorkin/laphs.min.js"></script>

<!-- Latest compiled and minified JavaScript for bootstrap-->

<script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.3/umd/popper.min.js"
  integrity="sha384-ZMP7rVo3mIykV+2+9J3UJ46jBk0WLaUAdn689aCwoqbBJiSnjAK/l8WvCWPIPm49" crossorigin="anonymous"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/js/bootstrap.min.js"
  integrity="sha384-ChfqqxuZUCnJSK3+MXmPNIyE6ZbWh2IMqE241rYiqJxyMiZ6OW/JmZQ5stwEULTy" crossorigin="anonymous"></script>

<script>
  LivePhotos.initialize();
</script>

<!-- https://craig.is/killing/mice -->
<script src="https://cdnjs.cloudflare.com/ajax/libs/mousetrap/1.6.3/mousetrap.min.js"></script>

<script>
  function ForceShowRightSideBar() {
    let toc = $("#right-sidebar")
    let mainContent = $("#main-content")
    toc.removeClass()
    toc.addClass("col-4 pl-0")

    mainContent.removeClass()
    mainContent.addClass("col-8 pr-0")

    // Hide DropUp
    tocDropUp = $("#id-ui-toc-dropdown")
    tocDropUp.removeClass()
    tocDropUp.addClass("d-none")
  }
  Mousetrap.bind('s', e => {
    console.log("search");
    location.href = "/"
  });
  Mousetrap.bind('l', e => ForceShowRightSideBar());

  Mousetrap.bind('t', e => {
    toc = $("#id-ui-toc-dropdown")
    toc.css("position", "fixed")
    toc.css("top", "10px")
    toc.css("right", "10px")
  });

  let shortcutHelp = `
Keyboard Shortcuts: 
  s - search
  l - latch sidebar
  t - toc to top
  `
  Mousetrap.bind('?', e => alert(shortcutHelp));

  // NOTE: This should really be in post.md
  generateToc("ui-toc", showPinToc = true);
  generateToc("ui-toc-affix", showPinToc = false);
</script>


{% if site.google_analytics %}
<!-- Asynchronous Google Analytics snippet -->
<script>
  (function (i, s, o, g, r, a, m) {
    i["GoogleAnalyticsObject"] = r;
    (i[r] =
      i[r] ||
      function () {
        (i[r].q = i[r].q || []).push(arguments);
      }),
      (i[r].l = 1 * new Date());
    (a = s.createElement(o)), (m = s.getElementsByTagName(o)[0]);
    a.async = 1;
    a.src = g;
    m.parentNode.insertBefore(a, m);
  })(
    window,
    document,
    "script",
    "//www.google-analytics.com/analytics.js",
    "ga"
  );

  ga("create", "{{ site.google_analytics }}", "auto");
  ga("require", "displayfeatures");
  ga("send", "pageview");
</script>

{% endif %}